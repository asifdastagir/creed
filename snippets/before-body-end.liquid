{% comment %}theme-check-disable  NestedSnippet, ImgWidthAndHeight{% endcomment %}
<loading-bar data-time="1500ms"></loading-bar>
<div class="modal-wrap modal-quickview {% unless settings.quick_shop_min_height %}min-height-off{% endunless %}" style="display: none;" id="quickView">
  <div data-load="loading"></div>
</div>

{%- if settings.checkout_agreement -%}
  <div class="modal-wrap modal-info-content" style="display: none;" id="agreementInfo"></div>
{%- endif -%}

{% render 'modal-newsletters-subscription' %}

<div id="popupSubscribeSuccess" class="modal-wrap modal-wrap--alert modal-wrap--success px-5 py-6" style="display: none;">
  <div class="modal-wrap-text text-center">
    <h5 class="text-nowrap"><span class="modal-wrap-icon mr-15">{% render 'icon-check' %}</span>{{ 'newsletter.success' | t }}</h5>
    <div>{{ 'theme.general.newsletter_success_subtext' | t }}</div>
    <div class="mt-3">
      <a href="#" class="btn btn--showmore" data-fancybox-close>{{ 'theme.general.got_it' | t }}</a>
    </div>
  </div>
</div>

<div class="modal-wrap modal-info-content" style="display: none; width: 970px;" id="modal-subscription-policy"></div>
<div class="modal-wrap collectionmodal" style="display: none;" id="collectionModal"><div data-load="loading"></div></div>

{%- if settings.back_to_top_desktop -%}
  <a class="back-to-top js-back-to-top compensate-for-scrollbar" href="#" title="Scroll To Top">
    <i class="icon-wrap">{% render 'icon-arrow-left' %}</i>
    {%- unless settings.use_ajax_scroll -%}
      <svg class="svg-progress {% unless settings.rounded_buttons_disable == "1" %}svg-progress--circle{% endunless %}" width="100" height="100" viewBox="0 0 100 100" style="">
        {%- if settings.rounded_buttons_disable == "1" -%}
          <rect width="50" height="50" fill="none" stroke-width="12" pathLength="100"></rect>
        {%- else -%}
          <circle class="percent" cx="50" cy="50" r="46" fill="none" stroke-width="8" pathLength="100" style=""></circle>
        {%- endif -%}
      </svg>
    {%- endunless -%}
  </a>
{%- endif -%}

{%- if settings.scrolling_image_effect -%}
  {%- liquid
    assign show_scrolling_effect = false
    if settings.scrolling_image_effect_home_only_yes
      if template == 'index'
        assign show_scrolling_effect = true
      endif
    else
      assign show_scrolling_effect = true
    endif
  -%}
  {% if show_scrolling_effect %}
    <rotate-aside {% if settings.scrolling_image_effect_only_desktop %}class="d-none d-lg-block"{% endif %}
        data-settings='{"scrollStyle":{{ settings.scrolling_image_effect_rotate }}, "itemWidthRandom":{{ settings.scrolling_image_effect_width_random }}, "itemWidth":{{ settings.scrolling_image_effect_width }}, "itemsPerScreen": {{ settings.scrolling_image_effect_per_screen }}, "edgeSpace": {{ settings.scrolling_image_effect_space }}}'>
      {%- if settings.scrolling_image_preset == 'multicolor_shapes' -%}
        <div class="rotate-aside-item"><div class="ic--ignore-global-round image-container" style="padding-bottom: 106%;"><img src="{{ 'rotate-aside1.png' | asset_img_url: 'master' }}" alt=""></div></div>
        <div class="rotate-aside-item"><div class="ic--ignore-global-round image-container" style="padding-bottom: 100%;"><img src="{{ 'rotate-aside2.png' | asset_img_url: 'master' }}" alt=""></div></div>
        <div class="rotate-aside-item"><div class="ic--ignore-global-round image-container" style="padding-bottom: 100%;"><img src="{{ 'rotate-aside3.png' | asset_img_url: 'master' }}" alt=""></div></div>
        <div class="rotate-aside-item"><div class="ic--ignore-global-round image-container" style="padding-bottom: 106%;"><img src="{{ 'rotate-aside4.png' | asset_img_url: 'master' }}" alt=""></div></div>
        <div class="rotate-aside-item"><div class="ic--ignore-global-round image-container" style="padding-bottom: 100%;"><img src="{{ 'rotate-aside5.png' | asset_img_url: 'master' }}" alt=""></div></div>
        <div class="rotate-aside-item"><div class="ic--ignore-global-round image-container" style="padding-bottom: 100%;"><img src="{{ 'rotate-aside6.png' | asset_img_url: 'master' }}" alt=""></div></div>
        <div class="rotate-aside-item"><div class="ic--ignore-global-round image-container" style="padding-bottom: 100%;"><img src="{{ 'rotate-aside7.png' | asset_img_url: 'master' }}" alt=""></div></div>
        <div class="rotate-aside-item"><div class="ic--ignore-global-round image-container" style="padding-bottom: 100%;"><img src="{{ 'rotate-aside8.png' | asset_img_url: 'master' }}" alt=""></div></div>
      {%- else -%}
        {%- for i in (1..10) -%}
          {% capture image %}scrolling_image_effect_{{ i }}{% endcapture %}
          {%- if settings[image] -%}
            <div class="rotate-aside-item">
              {% render 'image-container',
                  image: settings[image],
                  sizes: '400px',
                  padding_no_bg: padding_no_bg,
                  padding: padding,
                  class_img: 'w-100',
                  class_ic: 'ic--ignore-global-round',
                  cover: false,
                  bg: false,
                  is_link: false,
                  hover_scale: false
              %}
            </div>
          {%- endif -%}
        {%- endfor -%}
      {%- endif -%}
    </rotate-aside>
  {%- endif -%}
{%- endif -%}

{% render 'dark-light-switcher' %}


<script>
  Shopify.theme.version = '7.0.0';
  window.shopInfo = {version: Shopify.theme.version, uuid: '{{ settings.theme_uuid | replace: 'a', 'z' | replace: 'b', 'x' | replace: 'c', 'v' | replace: 'd', 'w' | replace: 'e', 'r' | replace: 'f', 'y' | replace: '-', 'pus' }}', theme_id: 44566068, store: 'https://{{ shop.permanent_domain }}', xyz: '{{ shop.email | replace: '@', 'portions34' }}', zzz: '{{ settings.theme_email | replace: '@', 'sweet17solt' }}'};

  const e = "\n- High conversion theme\n- Incredibly fast\n- Fully customizable\n- RTL support\n- 150+ widgets, 15+ ready skins\n\n\nCheckout theme by a link: https://bit.ly/46ySEsC\n\n"
    , ttt = "display:inline-block; font-size: 14px; padding: 5px; background: linear-gradient(to right, #156de1, #2a7ef6); color:#FFFFFF; border-radius: 5px;";
  console.group("%cLumia - Shopify Theme v." + Shopify.theme.version, ttt),
  console.log(`%c ${e}`, "font-size: 13px;"),
  console.groupEnd()
</script>

{%- if settings.product_card_rating_vendor == 'rivyo' -%}
  <script>
      try {
        window.fetch = new Proxy(window.fetch, {
        apply(fetch, that, args) {
          var result = fetch.apply(that, args);
          return result.then((response) => {
            if (args[0].search &&  (args[0].search(/collections\/all/) >= 0 || args[0].search(window.location.pathname) >= 0) ) {
                setTimeout(function(){
                        if (jq_lumia('.wc_product_review_badge').length > 0) {
                            var ajax_shop_badge_url = Shopify.shop;
                            var ajax_product_handle = new Array(),
                                wc_product_id_grid_array = new Array();
                            if (typeof ajax_shop_badge_url != 'undefined') {
                                ajax_shop_badge_url = ajax_shop_badge_url.replace(/^https?\:\/\//i, '');
                            }
                            jq_lumia('.wc_product_review_badge').each(function(idx, val) {
                                if (jq_lumia(this).is(':empty')) {
                                    if (jq_lumia(this).data('product_id')) {
                                        wc_product_id_grid_array.push(jq_lumia(this).data('product_id'));
                                    } else {
                                        ajax_product_handle.push(jq_lumia(this).data('handle'));
                                    }
                                }
                            });
                            if (wc_product_id_grid_array.length != 0 || ajax_product_handle.length != 0) {
                                jq_lumia.ajax({
                                    url: '//thimatic-apps.com/product_review/get_review_rating_update.php',
                                    type: 'post',
                                    dataType: 'json',
                                    data: {
                                        shop: ajax_shop_badge_url,
                                        product_handles: ajax_product_handle,
                                        product_ids: wc_product_id_grid_array
                                    },
                                    success: function(result) {
                                        if (result.empty) {
                                          jq_lumia('.wc_product_review_badge:empty').html(result.empty.html);
                                          jq_lumia.each(result, function(key, value) {
                                              jq_lumia('.wc_product_review_badge[data-handle="' + key + '"]').html(value.html);
                                              jq_lumia('.wc_product_review_badge[data-product_id="' + key + '"]').html(value.html);
                                          });
                                        }
                                    },
                                    error: function(XMLHttpRequest, textStatus) {
                                        console.log(XMLHttpRequest);
                                    }
                                });
                            }
                        }
                  }, 750);
              }
          }), result
        }
      });

        } catch (A) {
            console.log(A), console.log("error catching ajax cart")
        }
  </script>
{%- endif -%}
