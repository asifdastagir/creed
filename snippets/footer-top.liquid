{%- liquid
  assign show_newsletter = true
  if customer and customer.accepts_marketing
    assign show_newsletter = false
  endif -%}
{%- if section.settings.newsletter_enable and show_newsletter -%}
  {%- form 'customer', class: 'newsletter-form', name: 'newsletter' -%}
    <input type="hidden" name="contact[tags]" value="newsletter">
    {%- if form.posted_successfully? -%}
      {% render 'newsletters-subscription-success' %}
    {%- endif -%}
    {%- if form.errors -%}
      <script>
        document.querySelector('body').classList.remove('newslettermodal-error');
      </script>
    {%- endif -%}
    {%- liquid
      assign padding = ''
      if section.settings.top_bottom_space == 'none'
        assign padding = 'py-5 pt-lg-8 p-glue-next'
      elsif section.settings.top_bottom_space == 'small'
        assign padding = 'py-4 pt-lg-8 pb-md-4'
      elsif section.settings.top_bottom_space == 'medium'
        assign padding = 'py-8'
      endif
    -%}
      <div class="footer-top subscribe-footer text-center {{ padding }}">
        <div class="container">
          <h4 class="subscribe-footer-title heading-font">{{ 'theme.general.subscribe_first_html' | t }}</h4>
          <div class="row mt-3">
            <div class="col col-lg-6 mx-auto">
              <div class="subscribe-footer-input-group">
                {% render 'footer-subscribe-core', form: form %}
              </div>
            </div>
          </div>
        </div>
      </div>
  {%- endform -%}
{%- endif -%}
