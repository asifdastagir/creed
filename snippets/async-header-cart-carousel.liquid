{% comment %}theme-check-disable NestedSnippet{% endcomment %}
{%- if collections[settings.header_cart_collection].products.size > 0 -%}
{%- liquid
assign sizes = '(min-width: 1400px) 600px, (min-width: 1200px) 580px, (min-width: 992px) 550px, (min-width: 768px)
520px, calc((100vw - 30px - 20px) / 2)'
assign widths = ''
assign breakpoints = '1080,800,720,650,580,520' | split: ','
for i in (1..2)
assign k = i

if i == 1
assign k = 1.4
endif

for breakpoint in breakpoints
assign width_ = breakpoint | plus: 0 | times: k
assign widths = widths | append: width_ | append: ','
endfor
endfor
-%}
<swiper-carousel>
  <div class="swiper-container overflow-visible">
    <div class="swiper-wrapper">
      {%- for product in collections[settings.header_cart_collection].products limit: 12 -%}
      {%- liquid
      assign width_ = product.featured_media.preview_image.width
      assign card_widths = widths | append: width_
      -%}
      <div class="swiper-slide">
        {% render 'product-card-horizontal',
        product: product,
        sizes: sizes,
        widths: card_widths,
        product_form_suffix: 'cart-'
        %}
      </div>
      {%- endfor -%}
    </div>
    <div class="swiper-pagination position-relative mt-3"></div>
    <div class="swiper-arrows-carousel container">
      <div class="swiper-button-next"></div>
      <div class="swiper-button-prev"></div>
    </div>
  </div>
  <script type="application/json">
      {
        "pagination": {
          "el": ".minicart-prd-carousel .swiper-pagination",
          "clickable": true
        },
        "navigation": {
          "nextEl": ".minicart-prd-carousel .swiper-button-next",
          "prevEl": ".minicart-prd-carousel .swiper-button-prev"
        },
        "watchOverflow": true,
        "slidesPerView": 1,
        "spaceBetween": 50
      }
    </script>
</swiper-carousel>
{%- endif -%}